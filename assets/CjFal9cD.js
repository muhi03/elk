import{an as g,a1 as d,l as f,A as v,cs as p}from"./vIUoIwJY.js";const i=["ar","az","cs","da","de","el","en","eo","es","fa","fi","fr","ga","he","hi","hu","id","it","ja","ko","nl","pl","pt","ru","sk","sv","tr","uk","vi","zh"];function b(){let e="en";const r=a=>a.replace(/-.*$/,"");{const{locale:a}=f();e=r(a.value?a.value:navigator.language)}return e}async function h(e,r,a){const l=p(),n=v({success:!1,error:"",text:""}),o=/<a[^>]*>.*?<\/a>/g;try{const s=await $fetch(l.public.translateApi,{method:"POST",body:{q:e,source:r??"auto",target:a,format:"html",api_key:""}});n.value.success=!0,n.value.text=s.translatedText.replace(o,t=>{const u=o.exec(e);return u?u[0]:t})}catch(s){s.data?.error?n.value.error=s.data.error:n.value.error="Unknown Error, Please check your console in browser devtool."}return n}const c=new WeakMap;function k(e,r){c.has(e)||c.set(e,g({visible:!1,text:"",success:!1,error:""}));const a=c.get(e),l=d(),n="language"in e&&e.language&&e.language!==r&&i.includes(r)&&i.includes(e.language)&&!l.value.disabledTranslationLanguages.includes(e.language),o=n;async function s(){if(n){if(!a.text){const t=await h(e.content,e.language,r);a.error=t.value.error,a.text=t.value.text,a.success=t.value.success}a.visible=!a.visible}}return{enabled:o,toggle:s,translation:a}}export{b as g,i as s,k as u};
