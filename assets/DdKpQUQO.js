const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BZtoVkvg.js","./vIUoIwJY.js","./entry.B-fTcWKj.css"])))=>i.map(i=>d[i]);
import{d as b,l as h,n as w,p as _,o as i,q as f,g as s,e as u,r as $,h as m,$ as x,H as v,I as T,f as I,a0 as C,G as k,t as c,Z as E,v as N}from"./vIUoIwJY.js";import{n as A}from"./DdYSMCsR.js";const B={p6:""},S={flex:"~ col gap2"},j=b({__name:"index",setup(V){const{t:d}=h();w({title:()=>`${d("settings.users.label")} | ${d("nav.settings")}`});const o=x();async function g(){if(!confirm("Please aware that the tokens represent the **full access** to your accounts, and should be treated as sensitive information. Are you sure you want to export the tokens?"))return;const{saveAs:n}=await E(async()=>{const{saveAs:a}=await import("./BZtoVkvg.js").then(t=>t.F);return{saveAs:a}},__vite__mapDeps([0,1,2]),import.meta.url),e={"/":"Generated by Elk, you can import it to Elk to restore the tokens.","//":"This file represents the **full access** to your accounts, and should be treated as sensitive information.",version:1,origin:location.origin,users:o.value},r=new Blob([JSON.stringify(e,null,2)],{type:"application/json;charset=utf-8"});n(r,`elk-users-tokens-${new Date().toISOString().slice(0,10)}.json`)}async function y(){const n=await A({description:"Token File",mimeTypes:["application/json"]});try{const e=await n.text(),r=JSON.parse(e);if(r.version!==1)throw new Error("Invalid version");const a=r.users,t=[];for(const l of a)o.value.some(p=>p.server===l.server&&p.account.id===l.account.id)||t.push(l);if(t.length===0){alert("No new users found");return}if(!confirm(`Found ${t.length} new users, are you sure you want to import them?`))return;o.value=[...o.value,...t]}catch{alert("Invalid Elk tokens file")}}return(n,e)=>{const r=C,a=N;return i(),_(a,{"back-on-small-screen":""},{title:f(()=>[s("div",{"text-lg":"","font-bold":"",flex:"","items-center":"","gap-2":"",onClick:e[0]||(e[0]=(...t)=>n.$scrollToTop&&n.$scrollToTop(...t))},[s("span",null,c(n.$t("settings.users.label")),1)])]),default:f(()=>[s("div",B,[m(o).length?(i(),u(v,{key:0},[s("div",S,[(i(!0),u(v,null,T(m(o),t=>(i(),u("div",{key:t.account.id},[I(r,{account:t.account,"hover-card":!1},null,8,["account"])]))),128))]),e[2]||(e[2]=s("div",{my4:"",border:"t base"},null,-1)),s("button",{"btn-text":"",flex:"~ gap-2","items-center":"",onClick:g},[e[1]||(e[1]=s("span",{block:"","i-ri-download-2-line":""},null,-1)),k(" "+c(n.$t("settings.users.export")),1)])],64)):$("",!0),s("button",{"btn-text":"",flex:"~ gap-2","items-center":"",onClick:y},[e[3]||(e[3]=s("span",{block:"","i-ri-upload-2-line":""},null,-1)),k(" "+c(n.$t("settings.users.import")),1)])])]),_:1})}}});export{j as default};
