import{d as q,e as v,o as a,g as c,f as i,G as P,t as N,q as p,a0 as fe,h as n,aX as O,_ as E,b2 as J,b1 as ee,l as Y,i as ne,aG as ve,bH as ge,p as d,r as h,aM as be,x as ye,H as R,bI as $e,cR as he,bJ as W,bK as x,bv as V,a$ as ke,bL as K,bM as we,bN as _e,V as Ne,A as F,c as T,D as Ae,aa as Ce,F as Re,al as Se,Q as C,aL as je,b3 as De,as as Be,ay as Ue,az as Ie,aB as Fe,aC as Me,cS as He,a2 as Le,at as Ve,a4 as Pe,bY as te,I as Q,cE as Te,ck as X,cT as qe,j as ze,cU as Ee,w as Je,a1 as Ye,ax as Ge,N as Oe,ah as We,bz as xe,v as Ke,a9 as Qe,cV as Xe}from"./vIUoIwJY.js";import{_ as Ze}from"./Dxdd2Bvb.js";import{_ as en}from"./CXZMboa-.js";import{_ as nn}from"./DdLPqneJ.js";import{_ as tn}from"./CcqDeEvj.js";import{g as Z}from"./CziPTEgh.js";import{_ as on}from"./CEq8-eci.js";import{u as an}from"./Bkkj0y5L.js";import"./CrVpdqfN.js";const cn={flex:"~ col gap-2",p4:""},sn={flex:"~ gap-1","justify-center":""},un={flex:""},ln={flex:"","items-center":""},rn=q({__name:"AccountMoved",props:{account:{}},setup(u){return(f,g)=>{const r=Ze,s=fe,k=E;return a(),v("div",cn,[c("div",sn,[i(r,{account:f.account,link:!1},null,8,["account"]),P(" "+N(f.$t("account.moved_title")),1)]),c("div",un,[i(k,{to:("getAccountRoute"in f?f.getAccountRoute:n(O))(f.account.moved)},{default:p(()=>[i(s,{account:f.account.moved},null,8,["account"])]),_:1},8,["to"]),g[0]||(g[0]=c("div",{"flex-auto":""},null,-1)),c("div",ln,[i(k,{to:("getAccountRoute"in f?f.getAccountRoute:n(O))(f.account.moved),"btn-solid":"","inline-block":"","h-fit":""},{default:p(()=>[P(N(f.$t("account.go_to_profile")),1)]),_:1},8,["to"])])])])}}}),mn=["aria-label"],dn=q({__name:"AccountMoreButton",props:{account:{},command:{type:Boolean}},emits:["addNote","removeNote"],setup(u,{emit:f}){const g=f,r=J(u.account),s=ee(()=>u.account),{t:k}=Y(),{client:b}=ne(),S=ve("useStarFavoriteIcon"),{share:B,isSupported:j}=ge();function U(){B({url:location.href})}async function _(){if(!r.value.showingReblogs&&(await _e({title:k("confirm.show_reblogs.title"),description:k("confirm.show_reblogs.description",[u.account.acct]),confirm:k("confirm.show_reblogs.confirm"),cancel:k("confirm.show_reblogs.cancel")})).choice!=="confirm")return;const e=!r.value?.showingReblogs;r.value=await b.value.v1.accounts.$select(u.account.id).follow({reblogs:e})}async function M(){g("addNote")}async function I(){if(!r.value.note||r.value.note.length===0)return;const e=await b.value.v1.accounts.$select(u.account.id).note.create({comment:""});r.value.note=e.note,g("removeNote")}return(e,o)=>{const m=be,y=E,D=nn;return a(),d(D,{"eager-mount":e.command},{popper:p(()=>[i(y,{to:e.account.url,external:"",target:"_blank"},{default:p(()=>[i(m,{text:e.$t("menu.open_in_original_site"),icon:"i-ri:arrow-right-up-line",command:e.command},null,8,["text","command"])]),_:1},8,["to"]),n(j)?(a(),d(m,{key:0,is:"button",text:e.$t("menu.share_account",[`@${e.account.acct}`]),icon:"i-ri:share-line",command:e.command,onClick:o[0]||(o[0]=$=>U())},null,8,["text","command"])):h("",!0),("currentUser"in e?e.currentUser:n(ye))?(a(),v(R,{key:1},[n(s)?(a(),v(R,{key:1},[i(y,{to:"/pinned"},{default:p(()=>[i(m,{text:e.$t("account.pinned"),icon:"i-ri:pushpin-line",command:e.command},null,8,["text","command"])]),_:1}),i(y,{to:"/favourites"},{default:p(()=>[i(m,{text:e.$t("account.favourites"),icon:n(S)?"i-ri:star-line":"i-ri:heart-3-line",command:e.command},null,8,["text","icon","command"])]),_:1}),i(y,{to:"/mutes"},{default:p(()=>[i(m,{text:e.$t("account.muted_users"),icon:"i-ri:volume-mute-line",command:e.command},null,8,["text","command"])]),_:1}),i(y,{to:"/blocks"},{default:p(()=>[i(m,{text:e.$t("account.blocked_users"),icon:"i-ri:forbid-2-line",command:e.command},null,8,["text","command"])]),_:1}),i(y,{to:"/domain_blocks"},{default:p(()=>[i(m,{text:e.$t("account.blocked_domains"),icon:"i-ri:shut-down-line",command:e.command},null,8,["text","command"])]),_:1})],64)):(a(),v(R,{key:0},[i(m,{is:"button",text:e.$t("menu.mention_account",[`@${e.account.acct}`]),icon:"i-ri:at-line",command:e.command,onClick:o[1]||(o[1]=$=>("mentionUser"in e?e.mentionUser:n($e))(e.account))},null,8,["text","command"]),i(m,{is:"button",text:e.$t("menu.direct_message_account",[`@${e.account.acct}`]),icon:"i-ri:message-3-line",command:e.command,onClick:o[2]||(o[2]=$=>("directMessageUser"in e?e.directMessageUser:n(he))(e.account))},null,8,["text","command"]),n(r)?.showingReblogs?(a(),d(m,{key:1,is:"button",text:e.$t("menu.hide_reblogs",[`@${e.account.acct}`]),icon:"i-ri:repeat-line",command:e.command,onClick:o[4]||(o[4]=$=>_())},null,8,["text","command"])):(a(),d(m,{key:0,is:"button",icon:"i-ri:repeat-line",text:e.$t("menu.show_reblogs",[`@${e.account.acct}`]),command:e.command,onClick:o[3]||(o[3]=$=>_())},null,8,["text","command"])),!n(r)?.note||n(r)?.note?.length===0?(a(),d(m,{key:2,is:"button",text:e.$t("menu.add_personal_note",[`@${e.account.acct}`]),icon:"i-ri-edit-2-line",command:e.command,onClick:o[5]||(o[5]=$=>M())},null,8,["text","command"])):(a(),d(m,{key:3,is:"button",text:e.$t("menu.remove_personal_note",[`@${e.account.acct}`]),icon:"i-ri-edit-2-line",command:e.command,onClick:o[6]||(o[6]=$=>I())},null,8,["text","command"])),n(r)?.muting?(a(),d(m,{key:5,is:"button",text:e.$t("menu.unmute_account",[`@${e.account.acct}`]),icon:"i-ri:volume-up-fill",command:e.command,onClick:o[8]||(o[8]=$=>n(W)(n(r),e.account))},null,8,["text","command"])):(a(),d(m,{key:4,is:"button",text:e.$t("menu.mute_account",[`@${e.account.acct}`]),icon:"i-ri:volume-mute-line",command:e.command,onClick:o[7]||(o[7]=$=>n(W)(n(r),e.account))},null,8,["text","command"])),n(r)?.blocking?(a(),d(m,{key:7,is:"button",text:e.$t("menu.unblock_account",[`@${e.account.acct}`]),icon:"i-ri:checkbox-circle-line",command:e.command,onClick:o[10]||(o[10]=$=>n(x)(n(r),e.account))},null,8,["text","command"])):(a(),d(m,{key:6,is:"button",text:e.$t("menu.block_account",[`@${e.account.acct}`]),icon:"i-ri:forbid-2-line",command:e.command,onClick:o[9]||(o[9]=$=>n(x)(n(r),e.account))},null,8,["text","command"])),("getServerName"in e?e.getServerName:n(V))(e.account)!==("currentServer"in e?e.currentServer:n(ke))?(a(),v(R,{key:8},[n(r)?.domainBlocking?(a(),d(m,{key:1,is:"button",text:e.$t("menu.unblock_domain",[("getServerName"in e?e.getServerName:n(V))(e.account)]),icon:"i-ri:restart-line",command:e.command,onClick:o[12]||(o[12]=$=>n(K)(n(r),e.account))},null,8,["text","command"])):(a(),d(m,{key:0,is:"button",text:e.$t("menu.block_domain",[("getServerName"in e?e.getServerName:n(V))(e.account)]),icon:"i-ri:shut-down-line",command:e.command,onClick:o[11]||(o[11]=$=>n(K)(n(r),e.account))},null,8,["text","command"]))],64)):h("",!0),i(m,{is:"button",text:e.$t("menu.report_account",[`@${e.account.acct}`]),icon:"i-ri:flag-2-line",command:e.command,onClick:o[13]||(o[13]=$=>("openReportDialog"in e?e.openReportDialog:n(we))(e.account))},null,8,["text","command"])],64))],64)):h("",!0)]),default:p(()=>[c("button",{flex:"","gap-1":"","items-center":"","w-full":"",rounded:"",op75:"",hover:"op100 text-purple",group:"","aria-label":n(k)("actions.more")},o[14]||(o[14]=[c("div",{"rounded-5":"",p2:"","elk-group-hover":"bg-purple/10"},[c("div",{"i-ri:more-2-fill":""})],-1)]),8,mn)]),_:1},8,["eager-mount"])}}}),pn={flex:"","flex-col":""},fn={key:0,"p-4":"",flex:"","justify-between":"","items-center":"","bg-card":""},vn={"text-primary":"","font-bold":""},gn=["src","alt"],bn={p4:"","mt--18":"",flex:"","flex-col":"","gap-4":""},yn={relative:""},$n={flex:"","justify-between":""},hn={"inset-ie-0":"",flex:"~ wrap row-reverse","gap-2":"","items-center":"",pt18:"","justify-start":""},kn={"inset-ie-0":"",flex:"","gap-2":"","items-center":""},wn=["aria-pressed","aria-label"],_n={key:0,"i-ri:notification-4-fill":"",block:"","text-current":""},Nn={key:1,"i-ri-notification-4-line":"",block:"","text-current":""},An=["aria-label"],Cn={flex:"~ col gap1",pt2:""},Rn={flex:"",gap2:"","items-center":"","flex-wrap":""},Sn={flex:"","items-center":"","gap-1":""},jn={"sr-only":""},Dn={"self-start":"","mt-1":""},Bn={key:0,"space-y-2":"","pb-4":"",block:"",border:"b base"},Un={flex:"","flex-row":"","space-x-2":"","flex-v-center":""},In={"font-medium":""},Fn={"position-relative":""},Mn={key:1,"max-h-100":"","overflow-y-auto":""},Hn={key:2,flex:"~ col wrap gap1"},Ln={mt:"0.5","text-secondary":"",uppercase:"","text-xs":"","font-bold":""},Vn={key:3,flex:"~ wrap gap-2"},Pn=["title"],z=2e3,Tn=q({__name:"AccountHeader",props:{account:{},command:{type:Boolean}},setup(u){const{client:f}=ne(),{t:g}=Y(),r=Ne(()=>u.account.createdAt,{month:"long",day:"numeric",year:"numeric"}),s=J(u.account),k=F([]),b=F([]),S=F(!1),B=T(()=>!u.account.header.endsWith("/original/missing.png")),j=F(!1);function U(t){return t==="Joined"?g("account.joined"):t}function _(){return s.value?.notifying?g("account.notifications_on_post_disable",{username:`@${u.account.username}`}):g("account.notifications_on_post_enable",{username:`@${u.account.username}`})}function M(){X([{id:`${u.account.acct}:header`,type:"image",previewUrl:u.account.header,description:g("account.profile_description",[u.account.username])}])}function I(){X([{id:`${u.account.acct}:avatar`,type:"image",previewUrl:u.account.avatar,description:g("account.avatar_description",[u.account.username])}])}async function e(){s.value.notifying=!s.value?.notifying;try{const t=await f.value.v1.accounts.$select(u.account.id).follow({notify:s.value?.notifying});Object.assign(s,t)}catch{s.value.notifying=!s.value?.notifying}}Ae(()=>{const t=[],l=[];u.account.fields?.forEach(A=>{Z(A.name)?l.push(A):t.push(A)}),l.push({name:"Joined",value:r.value}),k.value=t,b.value=l});const o=F(s.value?.note??"");Ce(s,(t,l)=>{!l&&t&&(o.value=t.note??"")});async function m(t){if(!t.target||!("value"in t.target)||!s.value)return;const l=t.target?.value;if(s.value.note?.trim()===l.trim())return;const A=await f.value.v1.accounts.$select(u.account.id).note.create({comment:l});s.value.note=A.note,o.value=s.value.note??""}const y=ee(()=>u.account),D=T(()=>!!s.value?.notifying);async function $(){try{const t=qe(u.account),l=V(u.account),A=`${t}@${l}`;await navigator.clipboard.writeText(A)}catch{}j.value=!0,setTimeout(()=>{j.value=!1},2e3)}return(t,l)=>{const A=en,G=je,oe=E,ae=De,ce=dn,H=Be,ie=tn,se=Re("VDropdown"),ue=Ue,le=Ie,re=Fe,me=Me,de=He,L=te,pe=Te;return a(),v("div",pn,[n(s)?.requestedBy?(a(),v("div",fn,[c("span",vn,N(t.$t("account.requested",[t.account.displayName])),1),i(A,{account:t.account,relationship:n(s)},null,8,["account","relationship"])])):h("",!0),(a(),d(Se(n(B)?"button":"div"),{border:"b base","z-1":"",onClick:l[0]||(l[0]=w=>n(B)?M():void 0)},{default:p(()=>[c("img",{"h-50":"",height:"200","w-full":"","object-cover":"",src:t.account.header,alt:n(g)("account.profile_description",[t.account.username])},null,8,gn)]),_:1})),c("div",bn,[c("div",yn,[c("div",$n,[c("button",{"shrink-0":"","h-full":"",class:C({"rounded-full":!n(y),squircle:n(y)}),p1:"","bg-base":"","border-bg-base":"","z-2":"",onClick:I},[i(G,{square:n(y),account:t.account,"hover:opacity-90":"","transition-opacity":"","w-28":"","h-28":""},null,8,["square","account"])],2),c("div",hn,[n(y)?(a(),d(oe,{key:0,to:"/settings/profile/appearance","gap-1":"","items-center":"",border:"1","rounded-full":"",flex:"~ gap2 center","font-500":"","min-w-30":"","h-fit":"",px3:"",py1:"",hover:"border-primary text-primary bg-active"},{default:p(()=>[P(N(t.$t("settings.profile.appearance.title")),1)]),_:1})):h("",!0),i(ae,{account:t.account,command:t.command},null,8,["account","command"]),c("span",kn,[i(ce,{account:t.account,command:t.command,onAddNote:l[1]||(l[1]=w=>S.value=!0),onRemoveNote:l[2]||(l[2]=()=>{S.value=!1,o.value=""})},null,8,["account","command"]),!n(y)&&n(s)?.following?(a(),d(H,{key:0,content:_()},{default:p(()=>[c("button",{"aria-pressed":n(D),"aria-label":n(g)("account.notifications_on_post_enable",{username:`@${t.account.username}`}),"rounded-full":"","text-sm":"",p2:"","border-1":"","transition-colors":"",class:C(n(D)?"text-primary border-primary hover:bg-red/20 hover:text-red hover:border-red":"border-base hover:text-primary"),onClick:e},[n(D)?(a(),v("span",_n)):(a(),v("span",Nn))],10,wn)]),_:1},8,["content"])):h("",!0),i(H,{content:t.$t("list.modify_account")},{default:p(()=>[!n(y)&&n(s)?.following?(a(),d(se,{key:0},{popper:p(()=>[i(ie,{"user-id":t.account.id},null,8,["user-id"])]),default:p(()=>[c("button",{"aria-label":t.$t("list.modify_account"),"rounded-full":"","text-sm":"",p2:"","border-1":"","transition-colors":"","border-base":"","hover:text-primary":""},l[4]||(l[4]=[c("span",{"i-ri:play-list-add-fill":"",block:"","text-current":""},null,-1)]),8,An)]),_:1})):h("",!0)]),_:1},8,["content"])])])]),c("div",Cn,[c("div",Rn,[i(ue,{account:t.account,"font-bold":"","sm:text-2xl":"","text-xl":""},null,8,["account"]),t.account.locked?(a(),d(le,{key:0,"show-label":""})):h("",!0),t.account.bot?(a(),d(re,{key:1,"show-label":""})):h("",!0)]),c("div",Sn,[i(me,{account:t.account,"overflow-unset":"","line-clamp-unset":""},null,8,["account"]),i(H,{placement:"bottom",content:t.$t("account.copy_account_name"),flex:""},{default:p(()=>[c("button",{"text-secondary-light":"","text-sm":"",class:C(n(j)?"i-ri:check-fill text-green":"i-ri:file-copy-line"),onClick:$},[c("span",jn,N(t.$t("account.copy_account_name")),1)],2)]),_:1},8,["content"])]),c("div",Dn,[t.account.roles?.length?(a(),d(de,{key:0,account:t.account},null,8,["account"])):h("",!0)])])]),n(S)||n(s)?.note&&n(s).note.length>0?(a(),v("label",Bn,[c("div",Un,[l[5]||(l[5]=c("div",{"i-ri-edit-2-line":""},null,-1)),c("p",In,N(t.$t("account.profile_personal_note")),1),c("p",{"text-secondary":"","text-sm":"",class:C({"text-orange":n(o).length>z-100})},N(n(o).length)+" / "+N(z),3)]),c("div",Fn,[c("div",{"input-base":"","min-h-10ex":"","whitespace-pre-wrap":"","opacity-0":"",class:C({"trailing-newline":n(o).endsWith(`
`)})},N(n(o)),3),Le(c("textarea",{"onUpdate:modelValue":l[3]||(l[3]=w=>Pe(o)?o.value=w:null),"input-base":"","position-absolute":"",style:{height:"100%"},"top-0":"","resize-none":"",maxlength:z,onChange:m},null,544),[[Ve,n(o)]])])])):h("",!0),t.account.note?(a(),v("div",Mn,[i(L,{"text-4":"","text-base":"",content:t.account.note,emojis:t.account.emojis},null,8,["content","emojis"])])):h("",!0),n(k).length?(a(),v("div",Hn,[(a(!0),v(R,null,Q(n(k),w=>(a(),v("div",{key:w.name,flex:"~ gap-1","items-center":""},[c("div",Ln,[i(L,{content:w.name,emojis:t.account.emojis},null,8,["content","emojis"])]),l[6]||(l[6]=c("span",{"text-secondary":"","text-xs":"","font-bold":""},"|",-1)),i(L,{content:w.value,emojis:t.account.emojis},null,8,["content","emojis"])]))),128))])):h("",!0),n(b).length?(a(),v("div",Vn,[(a(!0),v(R,null,Q(n(b),w=>(a(),v("div",{key:w.name,flex:"~ gap-1",px1:"","items-center":"",class:C(`${w.verifiedAt?"border-1 rounded-full border-dark":""}`)},[i(H,{content:U(w.name)},{default:p(()=>[c("div",{"text-secondary":"",class:C(("getAccountFieldIcon"in t?t.getAccountFieldIcon:n(Z))(w.name)),title:U(w.name)},null,10,Pn)]),_:2},1032,["content"]),i(L,{"text-sm":"",content:w.value,emojis:t.account.emojis},null,8,["content","emojis"])],2))),128))])):h("",!0),i(pe,{account:t.account},null,8,["account"])])])}}}),qn={key:1,"h-30":"",flex:"~ col center gap-2"},zn={"text-secondary":""},En={"text-secondary-light":"","text-sm":""},Zn=q({__name:"index",async setup(u){let f,g;const r=ze().params,s=T(()=>Ee(r.account)),{t:k}=Y(),{data:b,pending:S,refresh:B}=([f,g]=Je(()=>an(()=>Xe(s.value).catch(()=>null),{immediate:!0,default:()=>Qe()},"$UeuyeYVYqZ")),f=await f,g(),f),j=T(()=>b.value?J(b.value).value:void 0),U=Ye();return Ge(()=>{B()}),(_,M)=>{const I=te,e=rn,o=Tn,m=Oe,y=on,D=Ke;return a(),d(D,{back:""},{title:p(()=>[i(I,{"timeline-title-style":"",content:n(b)?("getDisplayName"in _?_.getDisplayName:n(xe))(n(b)):n(k)("nav.profile"),"show-emojis":!("getPreferences"in _?_.getPreferences:n(We))(n(U),"hideUsernameEmojis"),markdown:!1},null,8,["content","show-emojis"])]),default:p(()=>[n(S)?(a(),v(R,{key:0},[],64)):n(b)?(a(),v(R,{key:1},[n(b).moved?(a(),d(e,{key:0,account:n(b)},null,8,["account"])):h("",!0),i(o,{account:n(b),command:"",border:"b base",class:C({"op-50 grayscale-50":!!n(b).moved})},null,8,["account","class"]),n(j)?.blockedBy?(a(),v("div",qn,[c("div",zn,N(_.$t("account.profile_unavailable")),1),c("div",En,N(_.$t("account.blocked_by")),1)])):(a(),d(m,{key:2}))],64)):(a(),d(y,{key:2},{default:p(()=>[P(N(_.$t("error.account_not_found",[`@${n(s)}`])),1)]),_:1}))]),_:1})}}});export{Zn as default};
