import{d as A,au as U,a as I,A as v,e as l,o as i,f as u,g as a,a0 as T,h as t,aX as W,as as q,q as k,Q as x,p as V,r as z,j as X,c as j,w as J,cG as Y,aa as Z,a2 as ee,at as te,bt as E,a5 as M,a4 as ne,t as N,H as C,I as oe}from"./vIUoIwJY.js";import{u as se,_ as ae}from"./9uxXzJvs.js";import{_ as ce}from"./CrVpdqfN.js";import{_ as ie}from"./DGEeLdu4.js";const re={flex:"","justify-between":"","hover:bg-active":"","transition-100":"","items-center":""},le=A({__name:"Account",props:{account:{},hoverCard:{type:Boolean},list:{}},setup(p){U(p.account);const r=I(),c=v(!1);async function f(){try{c.value?await r.v1.lists.$select(p.list).accounts.create({accountIds:[p.account.id]}):await r.v1.lists.$select(p.list).accounts.remove({accountIds:[p.account.id]}),c.value=!c.value}catch{}}return(n,R)=>{const m=T,_=q;return i(),l("div",re,[u(m,{account:n.account,hover:"",p1:"",as:"router-link","hover-card":n.hoverCard,shrink:"","overflow-hidden":"",to:("getAccountRoute"in n?n.getAccountRoute:t(W))(n.account)},null,8,["account","hover-card","to"]),a("div",null,[u(_,{content:t(c)?n.$t("list.add_account"):n.$t("list.remove_account"),hover:t(c)?"text-green":"text-red"},{default:k(()=>[a("button",{"text-sm":"",p2:"","border-1":"","transition-colors":"","border-dark":"","bg-base":"","btn-action-icon":"",onClick:f},[a("span",{class:x(t(c)?"i-ri:user-add-line":"i-ri:user-unfollow-line")},null,2)])]),_:1},8,["content","hover"])])])}}}),ue=A({__name:"AccountSearchResult",props:{result:{},active:{type:Boolean}},setup(p){return(r,c)=>{const f=T,n=ie;return i(),V(n,{as:"div",active:r.active,py2:"",block:"",px2:"","aria-selected":r.active,class:x({"bg-active":r.active})},{default:k(()=>[r.result.type==="account"?(i(),V(f,{key:0,account:r.result.data},null,8,["account"])):z("",!0)]),_:1},8,["active","aria-selected","class"])}}}),de={border:"t base","p-4":"","w-full":"",flex:"~ wrap",relative:"","gap-3":""},pe={"bg-base":"",border:"~ base","flex-1":"",h10:"","ps-1":"","pe-4":"","rounded-2":"","w-full":"",flex:"~ row","items-center":"",relative:"","focus-within:box-shadow-outline":"","gap-3":"","ps-4":""},ve=["placeholder"],fe={"left-0":"","top-18":"",absolute:"","w-full":"","z-10":"","group-focus-within":"pointer-events-auto visible",invisible:"","pointer-events-none":""},me={key:0,block:"","text-center":"","text-sm":"","text-secondary":""},_e=["hover","onClick"],he={key:1,block:"","text-center":"","text-sm":"","text-secondary":""},be={key:2},xe=A({__name:"accounts",async setup(p,{expose:r}){let c,f;const n=v();r({inputRef:n});const R=X().params,m=j(()=>R.list),_=I().v1.lists.$select(m.value).accounts,D=_.list(),b=v(([c,f]=J(()=>I().v1.lists.$select(m.value).accounts.list({limit:1e3})),c=await c,f(),c)),$=v(),d=v(""),L=v(),{accounts:F,loading:K}=se(d,{following:!0}),{focused:S}=Y(L),B=v(0);function y(o){return b.value.map(e=>e.id).includes(o)}const g=j(()=>d.value.length===0?[]:[...F.value]);Z([g,S],()=>B.value=-1);function G(o){try{_.create({accountIds:[o.id]}),b.value.push(o),$.value?.createEntry(o)}catch{}}function H(o){try{_.remove({accountIds:[o.id]});const w=b.value.map(h=>h.id).indexOf(o.id);w>-1&&(b.value.splice(w,1),$.value?.removeEntry(o.id))}catch{}}return(o,e)=>{const w=q,h=ae,O=le,P=ce;return i(),l(C,null,[a("div",{ref_key:"el",ref:L,relative:"",group:""},[a("form",de,[a("div",pe,[e[5]||(e[5]=a("div",{"i-ri:search-2-line":"","pointer-events-none":"","text-secondary":"",mt:"1px",class:"rtl-flip"},null,-1)),ee(a("input",{ref_key:"inputRef",ref:n,"onUpdate:modelValue":e[0]||(e[0]=s=>ne(d)?d.value=s:null),"bg-transparent":"",outline:"focus:none","ps-3":"","rounded-3":"",pb:"1px","h-full":"","w-full":"","placeholder-text-secondary":"",placeholder:o.$t("list.search_following_placeholder"),onKeydown:[e[1]||(e[1]=E(M(s=>t(n)?.blur(),["prevent"]),["esc"])),e[2]||(e[2]=E(M(()=>{},["prevent"]),["enter"]))]},null,40,ve),[[te,t(d)]]),t(d).length?(i(),l("button",{key:0,"btn-action-icon":"","text-secondary":"",onClick:e[3]||(e[3]=s=>{d.value="",t(n)?.focus()})},e[4]||(e[4]=[a("span",{"aria-hidden":"true",class:"i-ri:close-line"},null,-1)]))):z("",!0)])]),a("div",fe,[a("div",{"w-full":"","bg-base":"",border:"~ dark","rounded-3":"","max-h-100":"","overflow-auto":"",class:x(t(g).length===0?"py2":null)},[t(d).trim().length===0?(i(),l("span",me,N(o.$t("list.search_following_desc")),1)):t(K)?(i(),l("div",be,[u(h),u(h),u(h)])):(i(),l(C,{key:1},[t(g).length>0?(i(!0),l(C,{key:0},oe(t(g),(s,Q)=>(i(),l("div",{key:s.id,flex:"",border:"b base",py2:"",px4:"","hover:bg-active":"","justify-between":"","transition-100":"","items-center":""},[u(ue,{active:t(B)===parseInt(Q.toString()),result:s,tabindex:t(S)?0:-1},null,8,["active","result","tabindex"]),u(w,{content:y(s.id)?o.$t("list.remove_account"):o.$t("list.add_account")},{default:k(()=>[a("button",{"text-sm":"",p2:"","border-1":"","transition-colors":"","border-dark":"","btn-action-icon":"","bg-base":"",hover:y(s.id)?"text-red":"text-green",onClick:()=>y(s.id)?H(s.data):G(s.data)},[a("span",{class:x(y(s.id)?"i-ri:user-unfollow-line":"i-ri:user-add-line")},null,2)],8,_e)]),_:2},1032,["content"])]))),128)):(i(),l("span",he,N(o.$t("search.search_empty")),1))],64))],2)])],512),u(P,{ref_key:"paginatorRef",ref:$,paginator:t(D)},{default:k(({item:s})=>[u(O,{account:s,list:t(m),"hover-card":"",border:"b base",py2:"",px4:""},null,8,["account","list"])]),_:1},8,["paginator"])],64)}}});export{xe as default};
