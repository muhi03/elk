import{T as h,e as w,o as b,g as s,A as l,i as R,c as y,cH as r,aa as k,s as f,cI as B,cB as A,x as H,aX as S,cJ as T,bR as U}from"./DsX_WIiI.js";const D={},E={flex:"","flex-col":"","gap-2":"","px-4":"","py-3":""};function I(n,o){return b(),w("div",E,o[0]||(o[0]=[s("div",{flex:"","gap-4":""},[s("div",null,[s("div",{"w-12":"","h-12":"","rounded-full":"",class:"skeleton-loading-bg"})]),s("div",{flex:"~ col 1 gap-2",pb2:"","min-w-0":""},[s("div",{flex:"",class:"skeleton-loading-bg","h-5":"","w-20":"",rounded:""}),s("div",{flex:"",class:"skeleton-loading-bg","h-4":"","w-full":"",rounded:""})])],-1)]))}const M=h(D,[["render",I]]);function N(n,o={}){const p=l(!1),{client:x}=R(),t=l(!1),u=l([]),c=l([]),d=l([]),v=y(()=>r(n).trim());let i;const g=(e,_=!1)=>{_&&(u.value=[],c.value=[],d.value=[]),u.value=[...u.value,...e.accounts.map(a=>({type:"account",id:a.id,data:a,to:S(a)}))],c.value=[...c.value,...e.hashtags.map(a=>({type:"hashtag",id:`hashtag-${a.name}`,data:a,to:T(a.name)}))],d.value=[...d.value,...e.statuses.map(a=>({type:"status",id:a.id,data:a,to:U(a)}))]};k(()=>r(n),()=>{t.value=!!(v.value&&f.value)}),B(()=>r(n),async()=>{if(!v.value||!f.value)return;t.value=!0,i=x.value.v2.search.list({q:v.value,...r(o),resolve:!!H.value});const e=await i.next();p.value=!!e.done,e.done||g(e.value,!0),t.value=!1},{debounce:300});const m=async()=>{if(!v.value||!f.value||!i)return;t.value=!0;const e=await i.next();t.value=!1,p.value=!!e.done,e.done||g(e.value)};return{accounts:u,hashtags:c,statuses:d,loading:A(t),next:m}}export{M as _,N as u};
